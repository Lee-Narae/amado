<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="JY">

	
	<!--  지역    -->
	<resultMap type="HashMap" id="cityMap"> <!-- 리스트 안에 맵을 쓰든, 그냥 맵쓰는 경우에 resultMap -->
		<result property="cityseq" column="cityseq" javaType="String"/>
		<result property="cityname" column="cityname" javaType="String"/>
	</resultMap>
	<select id="getCityList" resultMap="cityMap">
		select cityseq, cityname from tbl_city
	</select>
	
	
	<select id="getLocalList" parameterType="String" resultType="String">
		select localname from tbl_local A join tbl_city B on A.fk_cityseq = B.cityseq where cityname = #{cityname}
	</select>
	
	
	
	<!-- 동호회등록  완료 요청(파일첨부ㅇ) -->
	<insert id="add_withFile"  parameterType="ClubVO">
		insert into tbl_club(clubseq, clubname, clubimg, fk_sportseq, fk_userid, clubtel, city, local, clubgym, clubtime, membercount, clubpay, clubstatus, clubscore, wasfileName)
        values(seq_club.nextval, #{clubname},  #{clubimg}, #{fk_sportseq}, #{fk_userid}, #{clubtel}, #{city}, #{local}, #{clubgym}, #{clubtime}, '30', #{clubpay}, default, default, #{wasfileName} ) 
	</insert>
	
	<!-- 동호회 등록후 회원등급 동호회장으로  업데이트 해주기 -->
	<update id="updateRank" parameterType="String" >
		update tbl_member set memberrank = 1
		where userid = #{userid}
	</update>
	
	<select id="getSportList" resultType="String">
		select sportseq
		from tbl_fleamarket
	</select>

</mapper>